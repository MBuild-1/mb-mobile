import 'dart:convert';

import 'package:dio/dio.dart';
import 'package:masterbagasi/data/entitymappingext/payment_entity_mapping_ext.dart';
import 'package:masterbagasi/misc/ext/future_ext.dart';
import 'package:masterbagasi/misc/ext/response_wrapper_ext.dart';

import '../../../domain/entity/payment/paymentmethodlist/payment_method_list_parameter.dart';
import '../../../domain/entity/payment/paymentmethodlist/payment_method_list_response.dart';
import '../../../misc/processing/dio_http_client_processing.dart';
import '../../../misc/processing/dummy_future_processing.dart';
import '../../../misc/processing/future_processing.dart';
import '../../../misc/response_wrapper.dart';
import 'payment_data_source.dart';

class DefaultPaymentDataSource implements PaymentDataSource {
  final Dio dio;

  const DefaultPaymentDataSource({
    required this.dio
  });

  @override
  FutureProcessing<PaymentMethodListResponse> paymentMethodList(PaymentMethodListParameter paymentMethodListParameter) {
    return DummyFutureProcessing<PaymentMethodListResponse>((parameter) async {
      return ResponseWrapper(
        json.decode(
          """[{"id":"3ab57fa0-4bb0-4889-8d5b-ef0f23b31d75","name":"bank_transfer","client_name":"Bank Transfer","active":1,"created_at":"2023-12-29T03:10:12.000000Z","updated_at":"2023-12-29T03:10:12.000000Z","deleted_at":null,"settling":[{"id":"02c0f39b-18df-4158-bbb4-9e52295793d2","payment_type":"permata","payment_group":"Bank Transfer","payment_active":1,"payment_image":"https://staging-api.masterbagasi.com/storage/payment/2LybtbzUwJranVoMJiFQgl1wSGyMv2rGzvX3r9yu-c02646cc-1438-4c60-8b5e-01c3539b69e2.png","service_fee":5000,"tax_rate":null,"created_at":"2023-12-22T09:11:40.000000Z","updated_at":"2023-12-22T09:11:40.000000Z","deleted_at":null,"payment_group_id":"3ab57fa0-4bb0-4889-8d5b-ef0f23b31d75","tbank_settling":{"id":"6103cb98-54d5-4b08-9522-041e7e728ae7","settling_id":"02c0f39b-18df-4158-bbb4-9e52295793d2","name":"permata","created_at":"2023-12-22T09:11:40.000000Z","updated_at":"2023-12-22T09:11:40.000000Z","deleted_at":null},"store_settling":null},{"id":"183b9cfd-d70c-4e07-bc2c-6dc336388f48","payment_type":"bank_transfer","payment_group":"Bank Transfer","payment_active":0,"payment_image":"https://staging-api.masterbagasi.com/storage/payment/WwNmAilby6dEz2D4OEdPigsU1HfemSwSLPQiB2sx-25a3c441-2637-43a2-9bb3-9e740d2b36fb.png","service_fee":4000,"tax_rate":null,"created_at":"2023-12-22T09:39:37.000000Z","updated_at":"2023-12-22T09:39:37.000000Z","deleted_at":null,"payment_group_id":"3ab57fa0-4bb0-4889-8d5b-ef0f23b31d75","tbank_settling":{"id":"175c112f-121b-4d1c-8540-d264ac385c1b","settling_id":"183b9cfd-d70c-4e07-bc2c-6dc336388f48","name":"cimb","created_at":"2023-12-22T09:39:37.000000Z","updated_at":"2023-12-22T09:39:37.000000Z","deleted_at":null},"store_settling":null},{"id":"3f79f3f1-a7c1-43fd-99ee-92f03cf2542f","payment_type":"bank_transfer","payment_group":"Bank Transfer","payment_active":1,"payment_image":"https://staging-api.masterbagasi.com/storage/payment/PGgR3Nqv30qW9enS0gQVU0jwglvRPS2Z3stIRTk8-2354b323-b0e0-43e6-9122-14c9f26a1249.png","service_fee":4000,"tax_rate":null,"created_at":"2023-12-22T09:42:36.000000Z","updated_at":"2023-12-22T09:42:36.000000Z","deleted_at":null,"payment_group_id":"3ab57fa0-4bb0-4889-8d5b-ef0f23b31d75","tbank_settling":{"id":"db3de3b8-9783-4217-9bdb-f2b7e4561b69","settling_id":"3f79f3f1-a7c1-43fd-99ee-92f03cf2542f","name":"bri","created_at":"2023-12-22T09:42:36.000000Z","updated_at":"2023-12-22T09:42:36.000000Z","deleted_at":null},"store_settling":null},{"id":"5f60a3e9-ec71-4682-935d-e46ed2a941eb","payment_type":"bank_transfer","payment_group":"Bank Transfer","payment_active":1,"payment_image":"https://staging-api.masterbagasi.com/storage/payment/B1zgmHO65fSJQUpCsKmOsNJWj4moBXCr8kWg47SF-13797e21-3400-40f8-a484-0219e335cc66.png","service_fee":4000,"tax_rate":null,"created_at":"2023-12-22T09:29:34.000000Z","updated_at":"2023-12-22T09:29:34.000000Z","deleted_at":null,"payment_group_id":"3ab57fa0-4bb0-4889-8d5b-ef0f23b31d75","tbank_settling":{"id":"68dc65b4-2055-419a-8d39-71f7046a76b6","settling_id":"5f60a3e9-ec71-4682-935d-e46ed2a941eb","name":"bni","created_at":"2023-12-22T09:29:34.000000Z","updated_at":"2023-12-22T09:29:34.000000Z","deleted_at":null},"store_settling":null},{"id":"70ae1146-381e-4bbf-890c-cedf793245f4","payment_type":"bank_transfer","payment_group":"Bank Transfer","payment_active":0,"payment_image":"https://staging-api.masterbagasi.com/storage/payment/htPzmJo3QlJnYIdQKP3hZADh3TLRvXpA42U67FL2-024f5fbc-79d5-4b8d-86af-ee6860cbfb3c.png","service_fee":4000,"tax_rate":null,"created_at":"2023-12-22T09:36:48.000000Z","updated_at":"2023-12-22T09:36:48.000000Z","deleted_at":null,"payment_group_id":"3ab57fa0-4bb0-4889-8d5b-ef0f23b31d75","tbank_settling":{"id":"6aaeca64-444c-4947-b6f6-8339ce25c569","settling_id":"70ae1146-381e-4bbf-890c-cedf793245f4","name":"bca","created_at":"2023-12-22T09:36:48.000000Z","updated_at":"2023-12-22T09:36:48.000000Z","deleted_at":null},"store_settling":null},{"id":"943cd56f-caf7-46f0-ba0e-70d4d8421558","payment_type":"echannel","payment_group":"Bank Transfer","payment_active":1,"payment_image":"https://staging-api.masterbagasi.com/storage/payment/LFGfJ8D97j5nEsoujvyfToZClE1mfjYqAzWNoPff-5ef69401-69bf-4794-94f7-011e358b6eaf.png","service_fee":4000,"tax_rate":null,"created_at":"2023-12-22T09:44:50.000000Z","updated_at":"2023-12-22T09:44:50.000000Z","deleted_at":null,"payment_group_id":"3ab57fa0-4bb0-4889-8d5b-ef0f23b31d75","tbank_settling":{"id":"96bfa564-3df6-4fb7-9f7f-5d1e20cda5fb","settling_id":"943cd56f-caf7-46f0-ba0e-70d4d8421558","name":"mandiri","created_at":"2023-12-22T09:44:50.000000Z","updated_at":"2023-12-22T09:44:50.000000Z","deleted_at":null},"store_settling":null}]},{"id":"6281f48b-5574-45ef-be42-8f5e72e3eb73","name":"e-wallet","client_name":"E Wallet","active":1,"created_at":"2023-12-29T04:24:26.000000Z","updated_at":"2023-12-29T04:24:26.000000Z","deleted_at":null,"settling":[{"id":"5624f88b-f3bb-42b2-8286-323a18a5a76b","payment_type":"gopay","payment_group":"E Wallet","payment_active":1,"payment_image":"https://staging-api.masterbagasi.com/storage/payment/gnLP5ec4cWpU2r1ceWyrIds6jCkpPOQOei5515hV-c421ce7f-05b6-4a1d-a1ce-ae5899fa12ca.png","service_fee":5000,"tax_rate":null,"created_at":"2023-12-29T04:37:16.000000Z","updated_at":"2023-12-29T04:37:16.000000Z","deleted_at":null,"payment_group_id":"6281f48b-5574-45ef-be42-8f5e72e3eb73","tbank_settling":null,"store_settling":null}]},{"id":"774aeec3-8fe0-40ee-aacc-56f4bc6c384f","name":"cstore","client_name":"Minimart","active":1,"created_at":"2023-12-29T03:11:48.000000Z","updated_at":"2023-12-29T03:11:48.000000Z","deleted_at":null,"settling":[{"id":"a010ba1f-3f5e-46e6-ad82-14f3adf54054","payment_type":"cstore","payment_group":"Minimart","payment_active":1,"payment_image":"https://staging-api.masterbagasi.com/storage/payment/XSbWYKmX2HM7IAopsDuVedp5L9bU4iRJRRpQr3yH-4543fb9a-44a9-4d1f-827f-809f88fd9045.png","service_fee":5000,"tax_rate":null,"created_at":"2023-12-29T02:12:30.000000Z","updated_at":"2023-12-29T02:12:30.000000Z","deleted_at":null,"payment_group_id":"774aeec3-8fe0-40ee-aacc-56f4bc6c384f","tbank_settling":null,"store_settling":{"id":"3102b296-2e94-4d64-b52f-49bf5151a87b","settling_id":"a010ba1f-3f5e-46e6-ad82-14f3adf54054","store":"alfamart","message":"Terima kasih sudah berbelanja di Master Bagasi","created_at":"2023-12-29T02:12:30.000000Z","updated_at":"2023-12-29T02:12:30.000000Z","deleted_at":null}},{"id":"c552b0f8-7e63-41d9-ac3f-40c4aaaffd66","payment_type":"cstore","payment_group":"Minimart","payment_active":0,"payment_image":"https://staging-api.masterbagasi.com/storage/payment/iQ2GNl0h1NgYMSbVsI6uDHH1KBWakI4opIucfP2R-9f784154-b969-441b-a38f-dedb485393e7.png","service_fee":5000,"tax_rate":null,"created_at":"2023-12-29T02:13:18.000000Z","updated_at":"2023-12-29T02:13:18.000000Z","deleted_at":null,"payment_group_id":"774aeec3-8fe0-40ee-aacc-56f4bc6c384f","tbank_settling":null,"store_settling":{"id":"ceffc3c5-460e-4014-befa-7cf4356f0ef5","settling_id":"c552b0f8-7e63-41d9-ac3f-40c4aaaffd66","store":"indomaret","message":"Terima kasih sudah berbelanja di Master Bagasi","created_at":"2023-12-29T02:13:18.000000Z","updated_at":"2023-12-29T02:13:18.000000Z","deleted_at":null}}]}]"""
        )
      ).mapFromResponseToPaymentMethodListResponse();
    });
    // return DioHttpClientProcessing((cancelToken) {
    //   return dio.get("/settling/payment-group", cancelToken: cancelToken)
    //     .map<PaymentMethodListResponse>(onMap: (value) => value.wrapResponse().mapFromResponseToPaymentMethodListResponse());
    // });
  }
}